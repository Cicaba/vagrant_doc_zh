<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">

		<title> Box Format - VMware Provider - Vagrant Documentation</title>

		<!-- meta -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- lib styles -->
		<link href="../../stylesheets/bootstrap-2bdef9a2.css" tppabs="http://docs.vagrantup.com/stylesheets/bootstrap-2bdef9a2.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../stylesheets/vagrantup-71e7d178.css" tppabs="http://docs.vagrantup.com/stylesheets/vagrantup-71e7d178.css" media="screen" rel="stylesheet" type="text/css" />

		<!-- lib js -->
		<script src="../../javascripts/jquery-08c11650.js" tppabs="http://docs.vagrantup.com/javascripts/jquery-08c11650.js" type="text/javascript"></script>
		<script src="../../javascripts/modernizr-84c0465a.js" tppabs="http://docs.vagrantup.com/javascripts/modernizr-84c0465a.js" type="text/javascript"></script>
		<script src="../../javascripts/bootstrap.min-98cc7a22.js" tppabs="http://docs.vagrantup.com/javascripts/bootstrap.min-98cc7a22.js" type="text/javascript"></script>
		<script src="../../javascripts/backstretch-3d1212ad.js" tppabs="http://docs.vagrantup.com/javascripts/backstretch-3d1212ad.js" type="text/javascript"></script>
		<script src="../../javascripts/vagrantup-03aae2a8.js" tppabs="http://docs.vagrantup.com/javascripts/vagrantup-03aae2a8.js" type="text/javascript"></script>

		<!-- fonts -->
		<link href="../../../fonts.googleapis.com/css-family=Inconsolata.css" tppabs="http://fonts.googleapis.com/css?family=Inconsolata" rel='stylesheet' type='text/css'>
		<script type="text/javascript" src="../../../use.typekit.net/xfs6zus.js" tppabs="http://use.typekit.net/xfs6zus.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

		<!-- Google analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-15091924-1']);
			_gaq.push(['_trackPageview']);

			(function() {
			 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
			 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			 })();

		 </script>
	</head>
	<body>
		<!-- wrap everything -->
		<div class="wrapper">

			<!-- nav -->

			<nav class="docs">
			<!-- vagrant logo -->
			<a class="vagrant-docs-logo" href="javascript:if(confirm(%27https://docs.vagrantup.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://docs.vagrantup.com/%27" tppabs="http://docs.vagrantup.com/">Vagrant Documentation</a>
			<!-- nav -->
			<ul class="pull-right unstyled">
				<li class="pill">
					<a href="javascript:if(confirm(%27http://www.amazon.com/gp/product/1449335837/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449335837&linkCode=as2&tag=vagrant-20  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.amazon.com/gp/product/1449335837/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449335837&linkCode=as2&tag=vagrant-20%27" tppabs="http://www.amazon.com/gp/product/1449335837/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1449335837&linkCode=as2&tag=vagrant-20">
						Vagrant Book
					</a>
				</li>
				<li><a href="javascript:if(confirm(%27http://www.vagrantup.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.vagrantup.com/%27" tppabs="http://www.vagrantup.com/">Home</a></li>
			</ul>
			</nav>

			<div class="page docs docs-home">
				<div class="container">
					<div class="row">

						<div class="sidebar span3">
							<!-- get the sidebar nav -->
							<!-- side nav docs -->
							<aside class="sidebar-nav">

							<div class="toggle hidden-desktop">
								<div class="open-close open"></div>
								<a href="#">Contents</a>
							</div>

							<ul class="unstyled">
								<li><a href="../index.html" tppabs="http://docs.vagrantup.com/v2/">Overview</a></li>

								<li><a href="../why-vagrant/index.html" tppabs="http://docs.vagrantup.com/v2/why-vagrant/index.html">Why Vagrant?</a></li>

								<li><a href="../installation/index.html" tppabs="http://docs.vagrantup.com/v2/installation/index.html">Installation</a></li>
								

								<li><a href="../getting-started/index.html" tppabs="http://docs.vagrantup.com/v2/getting-started/index.html">Getting Started</a></li>
								

								<li><a href="../cli/index.html" tppabs="http://docs.vagrantup.com/v2/cli/index.html">Command-Line Interface</a></li>
								

								<li ><a href="../share/index.html" tppabs="http://docs.vagrantup.com/v2/share/index.html">Vagrant Share</a></li>
								

								<li ><a href="../vagrantfile/index.html" tppabs="http://docs.vagrantup.com/v2/vagrantfile/index.html">Vagrantfile</a></li>
								

								<li><a href="../boxes.html" tppabs="http://docs.vagrantup.com/v2/boxes.html">Boxes</a></li>
								

								<li><a href="../provisioning/index.html" tppabs="http://docs.vagrantup.com/v2/provisioning/index.html">Provisioning</a></li>
								

								<li><a href="../networking/index.html" tppabs="http://docs.vagrantup.com/v2/networking/index.html">Networking</a></li>
								

								<li><a href="../synced-folders/index.html" tppabs="http://docs.vagrantup.com/v2/synced-folders/index.html">Synced Folders</a></li>
								

								<li><a href="../multi-machine/index.html" tppabs="http://docs.vagrantup.com/v2/multi-machine/index.html">Multi-Machine</a></li>

								<li><a href="../providers/index.html" tppabs="http://docs.vagrantup.com/v2/providers/index.html">Providers</a></li>
								

								

								

								
								<li class="current"><a href="index.html" tppabs="http://docs.vagrantup.com/v2/vmware/index.html">VMware</a></li>
								
								<ul class="sub unstyled">
									<li><a href="installation.html" tppabs="http://docs.vagrantup.com/v2/vmware/installation.html">Installation</a></li>
									<li><a href="usage.html" tppabs="http://docs.vagrantup.com/v2/vmware/usage.html">Usage</a></li>
									<li class="current"><a href="boxes.html" tppabs="http://docs.vagrantup.com/v2/vmware/boxes.html">Boxes</a></li>
									<li><a href="configuration.html" tppabs="http://docs.vagrantup.com/v2/vmware/configuration.html">Configuration</a></li>
									<li><a href="known-issues.html" tppabs="http://docs.vagrantup.com/v2/vmware/known-issues.html">Known Issues</a></li>
									<li><a href="kernel-upgrade.html" tppabs="http://docs.vagrantup.com/v2/vmware/kernel-upgrade.html">Kernel Upgrade</a></li>
								</ul>
								
								

								

								<li><a href="../plugins/index.html" tppabs="http://docs.vagrantup.com/v2/plugins/index.html">Plugins</a></li>
								

								<li><a href="../push/index.html" tppabs="http://docs.vagrantup.com/v2/push/index.html">Push</a></li>

								

								<li><a href="../other/index.html" tppabs="http://docs.vagrantup.com/v2/other/index.html">Other</a></li>

								
							</ul>
							</aside> <!-- /.sidebar -->
						</div> <!-- /.sidebar -->

						<div class="page-contents span9">
							<div class="page-background"></div>

							<!-- start page content -->
							<div class="row">
								<div class="span8 offset1">
									<h1>Boxes</h1>

<p>As with <a href="../providers/basic_usage.html" tppabs="http://docs.vagrantup.com/v2/providers/basic_usage.html">every provider</a>, the VMware
providers have a custom box format.</p>

<p>This page documents the format so that you can create your own base boxes.
Note that currently you must make these base boxes by hand. A future release
of Vagrant will provide additional mechanisms for automatically creating such
images.</p>

<div class="alert alert-info">
    <p>
        <strong>Note:</strong> This is a reasonably advanced topic that
        a beginning user of Vagrant doesn't need to understand. If you're
        just getting started with Vagrant, skip this and use an available
        box. If you're an experienced user of Vagrant and want to create
        your own custom boxes, this is for you.
    </p>
</div>

<p>Prior to reading this page, please understand the
<a href="../boxes/format.html" tppabs="http://docs.vagrantup.com/v2/boxes/format.html">basics of the box file format</a>.</p>

<h2>Contents</h2>

<p>A VMware base box is a compressed archive of the necessary contents
of a VMware &quot;vmwarevm&quot; file. Here is an example of what is contained
in such a box:</p>

<pre><code>$ tree
.
|-- disk-s001.vmdk
|-- disk-s002.vmdk
|-- ...
|-- disk.vmdk
|-- metadata.json
|-- precise64.nvram
|-- precise64.vmsd
|-- precise64.vmx
|-- precise64.vmxf

0 directories, 17 files
</code></pre>

<p>The files that are strictly required for a VMware machine to function are:
nvram, vmsd, vmx, vmxf, and vmdk files.</p>

<p>There is also the &quot;metadata.json&quot; file used by Vagrant itself. This file
contains nothing but the defaults which are documented on the
<a href="../boxes/format.html" tppabs="http://docs.vagrantup.com/v2/boxes/format.html">box format</a> page.</p>

<p>When bringing up a VMware backed machine, Vagrant copies all of the contents
in the box into a privately managed &quot;vmwarevm&quot; folder, and uses the first
&quot;vmx&quot; file found to control the machine.</p>

<div class="alert alert-info">
    <h3>Linked Clones</h3>
    <p>
        A future version of the VMware provider will implement
        linked cloning.
    </p>
</div>

<h2>Installed Software</h2>

<p>Base boxes for VMware should have the following software installed, as
a bare minimum:</p>

<ul>
<li><p>SSH server with key-based authentication setup. If you want the box to
work with default Vagrant settings, the SSH user must be set to accept
the <a href="javascript:if(confirm(%27https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub%27" tppabs="https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub">insecure keypair</a>
that ships with Vagrant.</p></li>
<li><p><a href="javascript:if(confirm(%27http://kb.vmware.com/kb/340  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://kb.vmware.com/kb/340%27" tppabs="http://kb.vmware.com/kb/340">VMware Tools</a> so that things such as shared
folders can function. There are many other benefits to installing the tools,
such as improved networking performance.</p></li>
</ul>

<h2>Optimizing Box Size</h2>

<p>Prior to packaging up a box, you should shrink the hard drives as much as
possible. This can be done with <code>vmware-vdiskmanager</code> which is usually
found in <code>/Applications/VMware Fusion.app/Contents/Library</code> for VMware Fusion. You first
want to defragment then shrink the drive. Usage shown below:</p>

<pre><code>$ vmware-vdiskmanager -d /path/to/main.vmdk
...
$ vmware-vdiskmanager -k /path/to/main.vmdk
...
</code></pre>

<h2>Packaging</h2>

<p>Remove any extraneous files from the &quot;vmwarevm&quot; folder
and package it. Be sure to compress the tar with gzip (done below in a
single command) since VMware hard disks are not compressed by default.</p>

<pre><code>$ cd /path/to/my/vm.vmwarevm
$ tar cvzf custom.box ./*
</code></pre>

								</div> <!-- /.span8 -->
							</div> <!-- /.row -->
						</div> <!-- /.page-contents -->
					</div> <!-- /.row -->
				</div> <!-- /.container -->
			</div> <!-- /.page -->

			<!-- footer -->
			<footer>
			<div class="container">
				<div class="row">
					<div class="span12">

						<ul class="unstyled footer-nav">
							<li><a href="javascript:if(confirm(%27https://docs.vagrantup.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://docs.vagrantup.com/%27" tppabs="http://docs.vagrantup.com/">Documentation</a></li>
							<li><a href="javascript:if(confirm(%27http://www.vagrantup.com/about  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.vagrantup.com/about%27" tppabs="http://www.vagrantup.com/about">About</a></li>
							<li><a href="javascript:if(confirm(%27http://www.vagrantup.com/support  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.vagrantup.com/support%27" tppabs="http://www.vagrantup.com/support">Support</a></li>
							<a href="javascript:if(confirm(%27http://www.vagrantup.com/downloads  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.vagrantup.com/downloads%27" tppabs="http://www.vagrantup.com/downloads">
								<li class="button inline-button">Download</li>
							</a>
						</ul>

						<ul class="unstyled logos">
							<a href="javascript:if(confirm(%27http://www.vagrantup.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.vagrantup.com/%27" tppabs="http://www.vagrantup.com/">
								<li class="vagrant-logo-monochrome"></li>
							</a>
							<li><span>by</span></li>
							<a href="javascript:if(confirm(%27http://www.hashicorp.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.hashicorp.com/%27" tppabs="http://www.hashicorp.com/">
								<li class="hashi-logo-monochrome "></li>
							</a>
						</ul> <!-- /span -->

					</div> <!-- /span -->
				</div> <!-- /row -->

				<div class="row">
					<h6 class="legal">
						Copyright &copy; 2015 HashiCorp
					</h6>
				</div> <!-- row -->
			</div> <!-- container -->
			</footer>

			<!-- close .wrapper -->
		</div>

		<!-- load scripts -->
		<!-- load full-width image into any div with class="big-background -->
		<script>
			$(".big-background").backstretch("assets/photos/full_width.jpg"/*tpa=http://docs.vagrantup.com/v2/vmware/assets/photos/full_width.jpg*/);
		</script>
	</body>
</html>
