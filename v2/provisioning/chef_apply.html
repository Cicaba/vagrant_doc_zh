<h1>Chef Apply Provisioner</h1>

<p><strong>Provisioner name: <code>chef_apply</code></strong></p>

<p>The Chef Apply provisioner allows you to provision the guest using
<a href="javascript:if(confirm(%27https://www.getchef.com/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://www.getchef.com/%27" tppabs="https://www.getchef.com/">Chef</a>, specifically with
<a href="javascript:if(confirm(%27https://docs.getchef.com/ctl_chef_apply.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://docs.getchef.com/ctl_chef_apply.html%27" tppabs="https://docs.getchef.com/ctl_chef_apply.html">Chef Apply</a>.</p>

<p>Chef Apply is ideal for people who are already experienced with Chef and the
Chef ecosystem. Specifically, this documentation page does not cover how use
Chef or how to write Chef recipes.</p>

<div class="alert alert-warn">
  <p>
    <strong>Warning:</strong> If you are not familiar with Chef and Vagrant already,
    we recommend starting with the <a href="shell.html" tppabs="http://docs.vagrantup.com/v2/provisioning/shell.html">shell
    provisioner</a>.
  </p>
</div>

<h2>Options</h2>

<p>This section lists the complete set of available options for the Chef Apply
provisioner. More detailed examples of how to use the provisioner are
available below this section.</p>

<ul>
<li><p><code>recipe</code> (string) - The raw recipe contents to execute using Chef Apply on
the guest.</p></li>
<li><p><code>log_level</code> (string) - The log level to use while executing <code>chef-apply</code>. The
default value is &quot;info&quot;.</p></li>
<li><p><code>upload_path</code> (string) - <strong>Advanced!</strong> The location on the guest where the
generated recipe file should be stored. For most use cases, it is unlikely you
will need to customize this value. The default value is
<code>/tmp/vagrant-chef-apply-#</code> where <code>#</code> is a unique counter generated by
Vagrant to prevent collisions.</p></li>
</ul>

<p>In addition to all the options listed above, the Chef Apply provisioner supports
the <a href="chef_common.html" tppabs="http://docs.vagrantup.com/v2/provisioning/chef_common.html">common options for all Chef provisioners</a>.</p>

<h2>Specifying a Recipe</h2>

<p>The easiest way to get started with the Chef Apply provisioner is to just
specify an inline
<a href="javascript:if(confirm(%27https://docs.getchef.com/essentials_cookbook_recipes.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed using an unsupported protocol (e.g., gopher).  \n\nDo you want to open it from the server?%27))window.location=%27https://docs.getchef.com/essentials_cookbook_recipes.html%27" tppabs="https://docs.getchef.com/essentials_cookbook_recipes.html">Chef recipe</a>. For
example:</p>

<pre><code class="ruby">Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.provision &quot;chef_apply&quot; do |chef|
    chef.recipe = &quot;package[apache2]&quot;
  end
end
</code></pre>

<p>This causes Vagrant to run Chef Apply with the given recipe contents. If you are
familiar with Chef, you know this will install the apache2 package from the
system package provider.</p>

<p>Since single-line Chef recipes are rare, you can also specify the recipe using a
&quot;heredoc&quot;:</p>

<pre><code class="ruby">Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.provision &quot;chef_apply&quot; do |chef|
    chef.recipe = &lt;&lt;-RECIPE
      package &quot;apache2&quot;

      template &quot;/etc/apache2/my.config&quot; do
        # ...
      end
    RECIPE
  end
end
</code></pre>

<p>Finally, if you would prefer to store the recipe as plain-text, you can set the
recipe to the contents of a file:</p>

<pre><code class="ruby">Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.provision &quot;chef_apply&quot; do |chef|
    chef.recipe = File.read(&quot;/path/to/my/recipe.rb&quot;)
  end
end
</code></pre>

<h2>Roles</h2>

<p>The Vagrant Chef Apply provisioner does not support roles. Please use the a
different Vagrant Chef provisioner if you need support for roles.</p>

<h2>Data Bags</h2>

<p>The Vagrant Chef Apply provisioner does not support data<em>bags. Please use the a
different Vagrant Chef provisioner if you need support for data</em>bags.</p>